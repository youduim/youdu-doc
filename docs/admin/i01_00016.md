---
title: 服务端数据存储位置
description: 本文主要介绍涉及有度服务端不同数据的存储位置说明。
keywords: 系统数据，数据，存储位置
---

#### 1.有度系统数据

##### 1.1.会话

会话是指2个用户及2个用户以上所组成的对话渠道，也就是session。简单说，单人会话、多人会话（讨论组、固定群）都是属于会话不同的分类。

> 存储位置：mysql、mongodb、leveldb等数据库。  

##### 1.2.消息

消息是指一个会话中的聊天记录，如文字、语音、图片、视频、文件在一个会话中都可以视为消息。

> 存储位置：
> 单机：服务端安装目录/db/leveldb
> 双机热备：mongodb集群。
>
> **注意**：消息数据加密存储，不支持直接获取查看。如需审计消息，请使用消息审计插件。

##### 1.3.文件数据

消息中的图片、文档、音视频消息、其它格式文件等都是文件，文件存储在不同的文件夹中，在mysql数据库中有对应的关系记录。

> 存储位置：
>
> | 文件类型                          | 存储位置                                            |
> | --------------------------------- | --------------------------------------------------- |
> | 头像数据                          | 服务端安装目录/db/avatar                            |
> | 会话产生的文件数据                | 服务端安装目录/db/files                             |
> | 离线文件数据（和files的区别待定） | 服务端安装目录/db/off_files                         |
> | 客户端的组织架构文件              | 服务端安装目录/db/org                               |
> | 企业互联会话产生的文件数据        | 存储企业互联的文件数据。服务端安装目录/db/rca_files |
> | 多文件服务断电续传数据            | 服务端安装目录/db/resum_files                       |
> | 网盘、群空间                      | 服务端安装目录/db/netdisk_files                     |

##### 1.4.组织架构

包含所有部门、帐号信息。

> 存储位置：mysql数据库。

##### 1.5.企业应用

主要分为系统应用及自建应用。系统应用是有度开发的，管理员、用户可以直接使用。自建应用是管理员根据自身企业需求，自己手动创建的应用。如果是H5应用，这里有度仅包含基本的配置数据。

> 存储位置：mysql数据库。

#### 2.有度数据库

##### 2.1.MySQL

以“emoa”命名的数据库都是有度服务的数据库。有度采用微服务设计，每个服务单独一个数据库。

##### 2.2.LevelDB

单机环境下，消息记录的存储服务。

##### 2.3.MongoDB

单机环境下，有度服务端3.0、3.1版本，作为消息记录的存储服务。

集群环境下，作为消息记录的存储服务。

>说明：如果是单机服务器迁移到热备方案环境，leveldb数据需要拷贝。此时迁移前的消息在leveldb中获取但不写入，迁移后的产生的消息数据均在mongodb。