---
title: 文件服务独立部署-安装准备
description: 本文主要涉及有度文件服务独立部署前期准备说明。
keywords: 防火墙策略，相关服务
---

## 说明

​		文件服务独立部署的目的在于，减轻主服务器的负载压力。文件传输一般比较消耗CPU、网络带宽，当您的使用人数较多时，为了充分保障主服务器、其它服务器的运行稳定性，我们建议将文件服务单独部署。

## 相关服务

| 内部服务进程   | 服务名称 | 描述                      |
| -------------- | -------- | ------------------------- |
| jgfiled.exe    | 文件服务 | 文件的上传和下载          |
| jgnetdiskd.exe | 网盘服务 | 存放网盘及群空间数据文件  |
| jgp2pd.exe     | P2P服务  | P2P文件传输               |
| jgupgraded.exe | 升级服务 | PC、Mac客户端升级配置服务 |

## 防火墙策略

- 0.0.0.0:任何来源IP地址，一般是指客户端。
- file_ip:文件服务器IP地址。
- main_ip:有度主服务器IP地址。



| 源地址  | 目标地址 |                                              | 备注                   | 可选端口设置 |
| ------- | -------- | -------------------------------------------- | ---------------------- | ------------ |
| 0.0.0.0 | file_ip  | 7080,7443                                    | 客户端访问文件服务器   | 场景一       |
| 0.0.0.0 | file_ip  | 7081，7444                                   | 客户端访问文件服务器   | 场景二       |
| main_ip | file_ip  | 7005,7038,7039,7030,7017                     | 主服务器访问文件服务器 |              |
| file_ip | main_ip  | 7020,7034,7026,7016,7001,7002,7010,7009,7011 | 文件服务器访问主服务器 |              |

场景一：

1. 仅内网使用有度，文件服务器使用默认端口。
2. 有外网访问需求，主服务器与文件服务器使用的外网出口IP不同（有多个公网IP），不同的公网IP分别映射至主服务器、文件服务器。

场景二：

　　有外网访问需求，主服务器与文件服务器同属一个内网，而且外网出口IP相同时（仅一个公网IP），由于端口是唯一的，所以文件服务器需修改默认端口为7081,7444（可根据实际可用端口设置），才能进行端口映射。