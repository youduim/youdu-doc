# 特殊情况

## 场景1

Web服务器代码无法修改，但提供了登录进入系统的接口，针对此场景，可以写一个中间插件，插件负责验证token，然后调用Web服务器接口登录系统。

提供给有度客户端的链接地址是插件的url，参数带上将要跳转的目标url，如：[http://plugin_ip:8080/token=$TOKEN$&redirect=http://oa_ip:8080](http://plugin_ip:8080/token=$TOKEN$&redirect=http:/oa_ip:8080)。

## 场景2

Web服务器代码无法修改，并且没有提供登录系统的接口，针对此场景，可以写一个中间插件，用户首次访问，插件提供页面让用户填写访问Web系统的帐号和密码，插件将帐号密码保存起来（建议加密保存）。

下次访问时：

①    准备好一个页面（如：jump.html），此页面在onload事件自动提交表单给目标Web服务器。jump.html的表单从正式登录页面拷贝过来，用户名和密码做成模版参数$UserName$、$Pwd$，待插件替换。

②    插件收到跳转登录请求时先验证token，获取用户名。

③    通过用户名获取之前保存的密码，将用户名和密码替换jump.html表单模版参数，将此html返回给浏览器。

④    浏览器收到jump.html后onload事件自动提交带有用户名和密码的表单给Web服务器，实现登录。